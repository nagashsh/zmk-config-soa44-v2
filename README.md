# SOA44 ZMK設定

## 機能

- 44キー分割レイアウト
- トラックボール搭載
- ニッケル水素電池対応（カスタム電圧管理）
- Bluetooth接続性能向上（+8dBm出力）
- zmk-ws2812-driverによるWS2812 LEDステータス表示
- ZMK Studio対応

## WS2812 LED設定

この設定では[zmk-ws2812-driver](https://github.com/gohanda11/zmk-ws2812-driver)を使用して、WS2812 LEDによる視覚的なステータス表示を実現しています。このドライバーは以下のインジケーター機能を提供します：

### レイヤー表示
- **レイヤー切り替え時のブリンク**: レイヤーが切り替わった時に白色で短時間点滅し、視覚的にフィードバック
- **レイヤー固有の色表示** (右手側のみ): アクティブなレイヤーに対応した色を持続的に表示
  - レイヤー 0 (Default): 消灯 (0x000000)
  - レイヤー 1: 赤 (0x7F0000)
  - レイヤー 2: 緑 (0x007F00)
  - レイヤー 3: 黄 (0x7F7F00)
  - レイヤー 4: 青 (0x00007F)
  - レイヤー 5: マゼンタ (0x7F007F)
  - レイヤー 6: シアン (0x007F7F)

### バッテリー表示
電源ON時にバッテリーレベルを色で表示：
- **高 (80%以上)**: 緑 (0x007F00)
- **中 (20-80%)**: 黄 (0x7F7F00)
- **低 (5-20%)**: オレンジ (0x7F4000)
- **危険 (5%未満)**: 赤 (0x7F0000)

### 接続状態表示
Bluetooth接続状態を色で表示：
- **USB接続**: 緑 (0x007F00)
- **BLE接続済み**: 青 (0x00007F)
- **アドバタイジング中**: シアン (0x007F7F)
- **切断**: 赤 (0x7F0000)

### ハードウェア構成
- **LED**: WS2812B 1個
- **制御ピン**: MOSI=P0.19, SCK=P0.20
- **電源制御**: P0.15 (P-ch MOSFET)
- **輝度**: 約50%に調整（省電力とバッテリー寿命向上）

## キーマップ

![キーマップ](keymap-drawer/soa44.svg)